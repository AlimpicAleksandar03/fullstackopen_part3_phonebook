(this["webpackJsonpexercises_2.6-2.10"]=this["webpackJsonpexercises_2.6-2.10"]||[]).push([[0],{44:function(e,t,n){"use strict";n.r(t);var r=n(19),c=n.n(r),a=n(10),o=n(3),u=n(1),i=n(20),l=n(5),s=n.n(l),b="/api/persons",d=function(){return s.a.get(b).then((function(e){return e.data}))},j=function(e){return s.a.post(b,e).then((function(e){return e.data}))},f=function(e){return console.log("".concat(b,"/").concat(e)),s.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m=function(e,t){return s.a.put("".concat(b,"/").concat(t),Object(i.a)({},e)).then((function(e){return e.data}))},p=n(0),h=function(e){var t=e.name,n=e.number,r=e.deleteUser,c=e.id,a=e.setPeople,o=e.allPeople;return Object(p.jsxs)("li",{children:[t," \u2014 ",n,Object(p.jsx)("button",{onClick:function(){if(window.confirm("Delete ".concat(t,"?")))return r(c).then((function(){return a(o.filter((function(e){return e.id!==c})))}))},children:"Delete"})]})},O=function(e){var t=e.people,n=e.deleteUser,r=e.setPeople,c=e.allPeople;return Object(p.jsx)("ul",{children:t.map((function(e){var t=e.name,a=e.number,o=e.id;return Object(p.jsx)(h,{name:t,number:a,deleteUser:n,id:o,setPeople:r,allPeople:c},o)}))})},x=function(e){var t=e.updateFilter;return Object(p.jsxs)("label",{children:["Filter: ",Object(p.jsx)("input",{onChange:t})]})},v=function(e){var t=e.name,n=e.number,r=e.updateName,c=e.updateNumber,a=e.onSubmit;return Object(p.jsxs)("form",{onSubmit:a,children:[Object(p.jsxs)("label",{children:["Name: ",Object(p.jsx)("input",{value:t,onChange:r})]}),Object(p.jsxs)("label",{children:["Number: ",Object(p.jsx)("input",{value:n,onChange:c})]}),Object(p.jsx)("button",{type:"submit",children:"Add"})]})},g=function(e){var t=e.message;return null===t?null:Object(p.jsx)("div",{className:"message",style:{color:"green",fontStyle:"italic",fontSize:16,padding:20,border:"4px solid green",borderRadius:10,margin:10,textTransform:"uppercase"},children:t})},S=function(e){var t=e.error;return null===t?null:Object(p.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},children:t})},y=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(u.useState)(""),i=Object(o.a)(c,2),l=i[0],s=i[1],b=Object(u.useState)(""),h=Object(o.a)(b,2),y=h[0],N=h[1],w=Object(u.useState)(""),P=Object(o.a)(w,2),k=P[0],C=P[1],T=Object(u.useState)(null),U=Object(o.a)(T,2),D=U[0],F=U[1],z=Object(u.useState)(null),B=Object(o.a)(z,2),E=B[0],I=B[1];Object(u.useEffect)((function(){d().then((function(e){return r(e)}))}),[]);var J=l.length>0?n.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})):n,L=f;return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Phonebook"}),Object(p.jsx)(S,{error:E}),Object(p.jsx)(g,{message:D}),Object(p.jsx)(x,{updateFilter:function(e){var t=e.target.value;s(t)}}),Object(p.jsx)(v,{name:y,number:k,onSubmit:function(e){if(e.preventDefault(),!y||0===y.length)return alert("Name cannot be empty");if(!k||0===k.length)return alert("Number cannot be empty");var t={name:y,number:k},c=n.find((function(e){return e.name==t.name}));c?window.confirm("".concat(c.name," already exists in phonebook, replace old number with new one?"))&&m(t,c.id).then((function(e){var t;return r((t=[e]).concat.apply(t,Object(a.a)(n.filter((function(e){return e.name!==c.name})))))})).then((function(){F("Number updated"),setTimeout((function(){F(null)}),1500)})).catch((function(e){I("Information of ".concat(t.name," has already been removed from server")),console.log(e),setTimeout((function(){I(null)}),1500)})):j(t).then((function(e){return r([e].concat(Object(a.a)(n)))})).then((function(){F("".concat(t.name," is added to phone book")),setTimeout((function(){F(null)}),1500)})),N(""),C("")},updateName:function(e){var t=e.target.value;N(t)},updateNumber:function(e){var t=e.target.value;C(t)}}),Object(p.jsx)("h2",{children:"Numbers"}),Object(p.jsx)(O,{people:J,deleteUser:L,setPeople:r,allPeople:n})]})};c.a.render(Object(p.jsx)(y,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.e7cc1cc6.chunk.js.map